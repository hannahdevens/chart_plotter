<h1>Upload CSV File</h1>

<%= form_tag({ action: 'upload' }, multipart: true) do %>
  <%= file_field_tag :csv_file, id: 'csv-file' %>
  <%= submit_tag 'Upload', id: 'upload-button' %>
<% end %>

<% if flash[:notice] %>
  <div class="notice">
    <%= flash[:notice] %>
  </div>
<% end %>

<%= form_tag({ action: 'generate_chart', method: 'post' }) do %>
  <h2>Select Chart Types</h2>
  <label>
    <%= check_box_tag 'chart_types[]', 'line_plot', @selected_chart_types.include?('line_plot') %>
    Line Plot
  </label>
  <br>
  <label>
    <%= check_box_tag 'chart_types[]', 'bar_plot', @selected_chart_types.include?('bar_plot') %>
    Bar Plot
  </label>
  <br>
  <label>
    <%= check_box_tag 'chart_types[]', 'scatter_plot', @selected_chart_types.include?('scatter_plot') %>
    Scatter Plot
  </label>
  <br>
  <%= submit_tag 'Generate' %>
<% end %>

<div id="chart-container">
  <% if @charts_data[:line_plot] %>
    <div class="chart">
      <h3>Line Plot</h3>
      <%= image_tag @charts_data[:line_plot], class: 'chart-image' %>
    </div>
  <% end %>

  <% if @charts_data[:bar_plot] %>
    <div class="chart">
      <h3>Bar Plot</h3>
      <%= image_tag @charts_data[:bar_plot], class: 'chart-image' %>
    </div>
  <% end %>

  <% if @charts_data[:scatter_plot] %>
    <div class="chart">
      <h3>Scatter Plot</h3>
      <%= image_tag @charts_data[:scatter_plot], class: 'chart-image' %>
    </div>
  <% end %>
</div>
